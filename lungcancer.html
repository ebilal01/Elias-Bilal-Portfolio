<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elias Bilal Portfolio</title>
    <link rel="stylesheet" type="text/css" href="/static/css/dtyle.css">
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;,">
     <!-- Include Select2 CSS -->
     <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
     <!-- Include jQuery -->
     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
     <!-- Include Select2 JS -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
</head>
<body>
  <header>
    <h3>Elias Bilal</h3>
    <h6>Mechanical Engineer</h6>
    <nav>
      <ul class="nav_links" style="color: black; text-decoration: none;">
        <li><a href="index.html" style="color: black; text-decoration: none;">about me</a></li>
        <li><a href="engineering.html" style="color: black; text-decoration: none;">engineering</a></li>
        <li><a href="art.html" style="color: black; text-decoration: none;">art</a></li>
      </ul>
    </nav>
    <div class="flex-parent jc-center">
      <button><a type="submit" onclick = "location.href= 'contact.html'" >Contact</a></button>
      </div>
  </header>
  <form method="post" action="/submit">
    <article>
    <h10>Smoking level: (1-8 with 8 representing a heavy smoker)</h10>
    <select name="smoking_level">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
    </select>
    </article>
    <article>
      <h10>Sex: (Man or Woman) </h10>
      <select name="gender">
        <option value="1">Man</option>
        <option value="2">Woman</option>
      </select>
  </article>
    <article>
    <h10>Alcohol Use level: (1-6 with 6 representing a heavy drinker)</h10>
    <select name="alcohol_use" placeholder="Alcohol Use level (1-6 with 6 representing a heavy drinker)">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
    </select>
    </article>
    <article>
      <label for="city-dropdown">Select a city: (Choose the largest major city closest to you)</label>
        <!-- Input field for typing -->
        <input type="text" id="city-input" placeholder="Type to search..." style="width: 300px;">
        <!-- Dropdown menu -->
        <select id="city-dropdown" name="city" style="width: 300px;">
            {% for city in cities %}
                <option value="{{ city }}">{{ city }}</option>
            {% endfor %}
        </select>
    </article>
    <article>
    <button type="submit">Run Python Code</button>
    </article>
  </form>
  <div id="result">Waiting for result...</div> <!-- This is the result section -->
  <article><h8>About the Data</h8></article>
  <h7>The data used in the Lung Cancer Probability calcuation is from a website called <a href="https://www.kaggle.com/" target="_self">
    Kaggle</a>, an online Machine Learning and Data Science Platform under Google. The input data is compared to <a href="https://www.kaggle.com/datasets/thedevastator/cancer-patients-and-air-pollution-a-new-link" target="_self">
      actual Lung Cancer probability results</a> from 1000 patients. The users Air Pollution Exposure Level is calculated from a <a href="https://www.kaggle.com/datasets/thedevastator/cancer-patients-and-air-pollution-a-new-link" target="_self">csv file containing airpollution levels</a> of 3796 cities from around the world. With that data the user is matched with a patients who share the same Sex, Alcohol Use Level, Smoking Level, and Air Pollution Exposure Level; then the probabilty results of those patients were averaged and a result response is generated for the program user. </h7>
  <script>
// Function to initialize Select 
    $(document).ready(function() {
            // Initialize Select2 for the dropdown menu
            $('#city-dropdown').select2();

            // Enable user to start typing and have the dropdown menu adjust dynamically
            $('#city-input').on('input', function() {
                var input = $(this).val().toLowerCase();
                $('#city-dropdown option').each(function() {
                    var optionText = $(this).text().toLowerCase();
                    if (optionText.includes(input)) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            });
        });
    document.querySelector('form').addEventListener('submit', async function(event) {
        event.preventDefault(); // Prevent the default form submission

        // Serialize form data into JSON format
        const formData = new FormData(this);
        const jsonData = {};
        formData.forEach((value, key) => {
            jsonData[key] = value;
        });

        // Send a POST request to the FastAPI endpoint with JSON data
        const response = await fetch('https://elias-bilal-portfolio-27.onrender.com/submit', {
            method: 'POST',
            body: JSON.stringify(jsonData),
            headers: {
                'Content-Type': 'application/json'
            }
        });

        // Update the result div with the received result
        const resultText = await response.text();
        document.getElementById('result').innerText = resultText;
    });
</script>

<article>
  <img src="https://raw.githubusercontent.com/ebilal01/Elias-Bilal-Portfolio/main/static/graphs/smoking_prob.png" alt="Smoking Probability">
</article>
<article>
  <img src="https://raw.githubusercontent.com/ebilal01/Elias-Bilal-Portfolio/main/static/graphs/drinking_prob.png" alt="Drinking Probability">
</article>
  <article>
  <img src="https://raw.githubusercontent.com/ebilal01/Elias-Bilal-Portfolio/main/static/graphs/Air_Qual_prob.png" alt="Air Quality Probability">
</article>

</body>
</html>
